NOTES for OCP

install odf
create filesystem

install pipelines operator
apply pipelines:
oc apply -k scheduling/slurm-operator/build-pipeline/

Create the namespace and add anyuid to all service accounts in the namespace
oc create ns slurm
oc create -f scc.yaml

# helm show values oci://ghcr.io/slinkyproject/charts/slurm --version=0.1.0 > values-slurm.yaml

helm upgrade -i -n slurm slurm-operator ../slurm/slurm-operator/helm/slurm-operator/ --values scheduling/slurm-operator/values-operator.yaml

helm upgrade -i -n slurm slurm ../slurm/slurm-operator/helm/slurm/ --values scheduling/slurm-operator/values-slurm.yaml

-- autoscaling

https://github.com/SlinkyProject/slurm-operator/blob/main/docs/autoscaling.md

Install OCP Custom Metrics Autoscaler
- add KedaController

Enable user workload monitoring
https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/monitoring/configuring-user-workload-monitoring#enabling-monitoring-for-user-defined-projects_preparing-to-configure-the-monitoring-stack-uwm

https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/nodes/automatically-scaling-pods-with-the-custom-metrics-autoscaler-operator#nodes-cma-autoscaling-custom-prometheus-config_nodes-cma-autoscaling-custom-trigger

https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html/monitoring/accessing-metrics#viewing-a-list-of-available-metrics_accessing-metrics-as-a-developer

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: cluster-monitoring-config
  namespace: openshift-monitoring
data:
  config.yaml: |
    enableUserWorkload: true
```

# might want to just use infra nodes and schedule cluster operators there?

Scheduler profiles
https://docs.redhat.com/en/documentation/openshift_container_platform/4.18/html/nodes/controlling-pod-placement-onto-nodes-scheduling#nodes-scheduler-profiles-configuring_nodes-scheduler-profiles

```
apiVersion: config.openshift.io/v1
kind: Scheduler
metadata:
  name: cluster
spec:
  mastersSchedulable: false
  profile: HighNodeUtilization
```
